{"version":3,"sources":["personService.js","App.js","index.js"],"names":["url","getAllPersons","axios","get","then","response","data","person","persons","find","personCheck","name","Error","post","personName","personToDelete","delete","id","filter","personNumber","personToUpdate","updatedPerson","number","put","newPersons","push","Filter","handler","value","onChange","PersonForm","handleSubmit","handleNameChange","handleNumberChange","newName","newNumber","onSubmit","type","Persons","newFilter","handleDelete","toLowerCase","startsWith","sort","a","b","map","onClick","Notification","color","message","notificationStyle","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","Confirmation","App","useState","setPersons","setNewName","setNewNumber","filterString","setFilterString","confirmation","setConfirmation","error","setError","useEffect","personService","catch","err","console","log","updatePerson","event","target","preventDefault","newPerson","includes","window","confirm","newPersonWithId","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9c2fa6da.chunk.js","sourcesContent":["import axios from 'axios'\nconst url = 'http://localhost:3001/persons';\n\nconst getAllPersons = () => (\n  axios.get(url).then(response=>response.data)\n)\n\nconst addNewPerson = (person) => (\n  getAllPersons()\n    .then(persons => {\n      const possibleDuplicate = persons.find(personCheck => person.name === personCheck.name)\n      if (possibleDuplicate) throw new Error(`${person.name} already added to server`)\n      return axios.post(url, person).then(response=>response.data)\n    })\n)\n\nconst deletePerson = (personName) => (\n  getAllPersons()\n    .then(persons=>{\n      const personToDelete = persons.find(person => person.name === personName)\n      return axios.delete(`${url}/${personToDelete.id}`)\n        .then(()=>persons.filter(person=>person.id !== personToDelete.id))\n    })\n)\n\nconst updatePerson = (personName, personNumber) => (\n  getAllPersons()\n    .then(persons=>{\n      const personToUpdate = persons.find(person=> person.name === personName)\n      if (!personToUpdate) throw new Error(`${personName} already deleted from server`)\n      const updatedPerson = {...personToUpdate, number:personNumber}\n      return axios.put(`${url}/${personToUpdate.id}`, updatedPerson)\n        .then(()=>{\n          const newPersons = persons.filter(person=>person.name !== personName)\n          newPersons.push(updatedPerson);\n          return newPersons;\n        })\n    })\n)\n\nexport default { getAllPersons, addNewPerson, deletePerson, updatePerson }","import React, { useState, useEffect } from 'react'\nimport personService from './personService'\n\nconst Filter = ({handler, value}) => (\n  <div>\n    filter shown by: <input onChange={handler} value={value}/>\n  </div>\n)\n\nconst PersonForm = ({handleSubmit, handleNameChange, handleNumberChange, newName, newNumber}) => (\n  <form onSubmit={handleSubmit}>\n    <div>\n      name: <input onChange={handleNameChange} value={newName}/><br />\n      number: <input onChange={handleNumberChange} value={newNumber}/>\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n)\n\nconst Persons = ({persons, newFilter, handleDelete }) => (\n  <table>\n    <tbody>\n      {persons\n      .filter(person=> (\n        person.name.toLowerCase().startsWith(newFilter.toLowerCase())\n      ))\n      .sort((a,b) => (a.name < b.name ? -1 : a.name === b.name ? 0 : 1))\n      .map(person=>(\n        <tr key={person.id}>\n          <td>{person.name}</td>\n          <td>{person.number}</td>\n          <td><button id={person.name} onClick={handleDelete}>delete</button></td>\n        </tr>\n      ))}\n    </tbody>\n  </table>\n)\n\nconst Notification = ({color, message}) => {\n  const notificationStyle = {\n    color: color,\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n  return (\n    <h4 style={notificationStyle}>{message}</h4>\n  )\n}\n\nconst Error = ({message}) => {\n  return message \n  ? (\n    <Notification color='red' message={message} />\n  )\n  : <div></div>\n}\n\nconst Confirmation = ({message}) => {\n  return message \n  ? (\n    <Notification color='green' message={message} />\n  )\n  : <div></div>\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filterString, setFilterString] = useState('')\n  const [ confirmation, setConfirmation] = useState('')\n  const [ error, setError] = useState('')\n  useEffect(()=>{\n    personService.getAllPersons()\n      .then(data=>setPersons(data))\n      .catch(err=>console.log(err))\n  }, [])\n  const updatePerson = (name, number) => {\n    personService.updatePerson(name, number)\n      .then(newPersons => {\n        setPersons(newPersons)\n        setError('')\n        setConfirmation(`Successfully updated ${name}`)\n      })\n      .catch(err => {\n        console.log(err)\n        setConfirmation('')\n        setError(`${name} has already been removed from the server`)\n      })\n  }\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    const newPerson = {name: newName, number: newNumber}\n    if (!(persons.map(a=>a.name).includes(newName))) {\n      personService.addNewPerson(newPerson)\n        .then(newPersonWithId => {\n          setPersons(persons.concat(newPersonWithId))\n          setError('')\n          setConfirmation(`Successfully added ${newName}`)\n        })\n        .catch(err => {            \n          if (window.confirm(`${newName} is already added to the phonebook, replace old number?`)) {\n            updatePerson(newName, newNumber)\n          }\n        })\n    } else {\n      if (window.confirm(`${newName} is already added to the phonebook, replace old number?`)) {\n        updatePerson(newName, newNumber)\n      }\n    }\n    setNewNumber('')\n    setNewName('')\n  }\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleFilterChange = (event) => {\n    setFilterString(event.target.value)\n  }\n  const handleDelete = (event) => {\n    const personName = event.target.id\n    if (window.confirm(`Delete ${personName}?`))\n    personService.deletePerson(personName)\n      .then(newPersons=>{\n        setPersons(newPersons)\n        setError('')\n        setConfirmation(`Deleted ${personName}`)\n      })\n      .catch(err=>console.log(err))\n  }\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Confirmation message={confirmation} />\n      <Error message={error} />\n      <Filter handler={handleFilterChange} value={filterString}/>\n      <h3>Add New</h3>\n      <PersonForm \n        handleNameChange={handleNameChange} \n        handleSubmit={handleSubmit}\n        handleNumberChange={handleNumberChange}\n        newName={newName}\n        newNumber={newNumber}/>\n      <h2>Numbers</h2>\n      <Persons newFilter={filterString} persons={persons} handleDelete={handleDelete}/>\n    </div>\n  )\n}\n\nexport default App\n","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}